<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="favicon.ico">

  <title>ProfEd NRMS</title>
  <link href="css/bootstrap.css" rel="stylesheet">
  <link href="css/dashboard.css" rel="stylesheet">
  <link href="css/bootstrap-slider.min.css" rel="stylesheet">
</head>

<body>
  <nav class="navbar navbar-dark fixed-top bg-primary flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-12" href="#">Aeroacoustics: Noise Reduction Strategies for Mechanical Systems</a>
  </nav>

  <div class="container-fluid">
    <div class="row">
      <nav class="col-md-2 d-none d-md-block bg-light sidebar">
        <div class="sidebar-sticky">
          <ul class="nav flex-column">

            <li class="nav-item">
              <a class="nav-link active"   href="index.html" target="_self">
                <span data-feather="file"></span>
                Jet noise - Lighthill's analogy <span class="sr-only">(current)</span>
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link "  href="WindTurbine1.html"  target="_self">
                <span data-feather="file"></span>
                Wind turbine noise - surface pressure fluctuations
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link "  href="WindTurbine2.html"  target="_self">
                <span data-feather="file"></span>
                Wind turbine noise - predicted noise in the far field
              </a>
            </li>


            <li class="nav-item">
              <a class="nav-link"  href="Propeller.html"  target="_self">
                <span data-feather="file"></span>
                Propeller noise - tonal components
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link"  href="WingFlap.html"  target="_self">
                <span data-feather="file"></span>
                Cavity noise - frequency analysis
              </a>
            </li>

          </ul>
        </div>
      </nav>

      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">Jet noise - Lighthill's approach</h1>
          <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group mr-2">
              <button class="btn btn-sm btn-outline-secondary active" onclick="caseAction(this)">Case 1: Frequency response</button>
              <button class="btn btn-sm btn-outline-secondary" onclick="caseAction(this)">Case 2: Jet directivity</button>
              <button class="btn btn-sm btn-outline-secondary" onclick="caseAction(this)">Case 3: Mach number effect</button>
            </div>
          </div>
        </div>

       <blockquote class="blockquote text-justify">
          <p><font size="3">Many noise prediction algorithms start from Lighthill's acoustic analogy, with a series of approximations and modelling strategies to 
		  avoid integrating Lighthill's tensor in space and time in the jet volume. As you have seen already from the study of Tam and Aurialt, the integration starts
		  from realizing that the spectrum in the far field is related to the two-point cross-correlation function of Lighthill's stress tensor in the jet field. This is
		  mainly because many of the points in the jet-volume can be assumed as aeroacoustic sources, interfering with each other. For compact sources, after modelling the
		  two-point cross-correlation function as a Gaussian distribution, the formula for the jet noise in the far field (simplified at an angle of 90 degrees from the jet
		  axis is reported here below. For the full formula and the discussion of the derivation the reader can find all the details in: 
	  </p>
          <p><font size="3"; style="color:blue"> Morris P.J., Farassat, 2012, Acoustic Analogy and Alternative Theories for Jet Noise Prediction, AIAA Journal, Vol.40, No.4. 
          </p>	  
        </blockquote>
	      
        <div class="row">
                <div class="col"><img style="width:780px;height:130px" src="img/jet/formula.png" alt=""></div>
            <div class="col">
            <img style="width:180px;height:70px" src="img/click.png" alt="" data-toggle="modal" data-target="#exampleModal">
          </div>
        </div>

        <div class="row" style="margin-top:30px;">
            <div class="col">
            <h4 id="caseTitle" class="text-primary">Case 1: Frequency response</h4>
          </div>

        </div>
        <div class="row" style="margin-bottom:30px;">
          <div class="col-12">
            <h6 id="caseDesc">A jet operated with an exit velocity corresponding to M=0.9 with D=5cm, the observer location is at 90 degrees with respect to the 
		    	     jet axis, at a distance of 72D from it. Frequency is reported in non-dimensional Strouhal number (St).</h6>
          </div>
        </div>

        <div id="container" style="width: 60% margin: 0 auto"></div>

        <!-- silder bar -->
        <div id="sliderCase1Area">
          <div class="row">
            <div class="col-1">Frequency</div>
            <div class="col-11">
              <input id="sliderCase1" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="26" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>
        </div>

        <div id="sliderCase2Area" style="display:none">
          <div class="row">
            <div class="col-1">St, 50°
            </div>
            <div class="col-11">
              <input id="sliderCase21" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>

          <div class="row">
            <div class="col-1">St, 90°
            </div>
            <div class="col-11">
              <input id="sliderCase22" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>

          <div class="row">
            <div class="col-1">St, 130°
            </div>
            <div class="col-11">
              <input id="sliderCase23" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>

        </div>

        <div id="sliderCase3Area" style="display:none">
          <div class="row">
            <div class="col-1">St, M=0.5
            </div>
            <div class="col-11">
              <input id="sliderCase31" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>

          <div class="row">
            <div class="col-1">St, M=0.7
            </div>
            <div class="col-11">
              <input id="sliderCase32" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>

          <div class="row">
            <div class="col-1">St, M=1.47
            </div>
            <div class="col-11">
              <input id="sliderCase33" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>

        </div>
    </div>

    </main>
  </div>
  </div>


  <!-- Modal -->
  <div class="modal fade" style="top:100px;left:-200px;" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <img style="width:800px;height:600px" src="img/jet/explain.png" alt="">
    </div>
  </div>


  <script src="js/jquery.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>

  <script src="js/bootstrap-slider.js"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>



  <!-- icons -->
  <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
  <script>
    feather.replace();
  </script>
  <!-- icons end -->

  <script>
    var sidebtn = function (nav) {
      console.log($(nav));
      // let navTitle = $(nav).text().trim();
      // if('Wind Turbine' === navTitle){
      //   $(nav).
      // }
    }
  </script>



  <!-- 初始化数据 -->
  <script>
    let cases = [{title: 'Case 1: Frequency response',
        	  desc: 'A jet operated with an exit velocity corresponding to M=0.9 with D=5cm, the observer location is at 90 degrees with respect to the jet axis, at a distance of 72D from it. Frequency is reported in non-dimensional Strouhal number (St)ance of 72D.'},
 		 {title: 'Case 2: Jet directivity',
		  desc: 'A jet operated with an exit velocity corresponding to M=0.9 with D=5cm, the jet directivity is analyzed at a distance of 100D, from 50-90-130 degrees with respect to the jet-axis. Frequency is reported in non-dimensional Strouhal number (St).'},
 		 {title: 'Case 3: Mach number',
       		  desc: 'A jet with a D=5cm is operating by varying from M=0.5-0.7-1.47. The observer location is at a distance of 100D, 90 degrees from the jet axis. Frequency is reported in non-dimensional Strouhal number (St).'}]
    let case1Data = [
      [-1.7373, 36.2500],
      [-1.6313, 39.1300],
      [-1.5319, 41.7900],
      [-1.4326, 44.2500],
      [-1.3301, 46.7100],
      [-1.2276, 49.0600],
      [-1.1251, 51.1600],
      [-1.0258, 53.0900],
      [-0.9234, 54.9800],
      [-0.8274, 56.3400],
      [-0.7282, 57.5000],
      [-0.6182, 58.3500],
      [-0.5203, 58.5600],
      [-0.4245, 58.3100],
      [-0.3255, 57.4400],
      [-0.2171, 55.9900],
      [-0.1183, 54.3900],
      [-0.0162, 52.6300],
      [0.0795, 50.6600],
      [0.1781, 48.7400],
      [0.2801, 46.7700],
      [0.3885, 44.5400],
      [0.4871, 42.1100],
      [0.5827, 39.1500],
      [0.6812, 35.1000],
      [0.7827, 29.4300],
      [0.8839, 21.3700]
    ];
    let case21Data = [
      [-1.9972, 83.5200],
      [-1.7072, 88.9300],
      [-1.5304, 92.3000],
      [-1.3950, 94.4200],
      [-1.2459, 96.6200],
      [-1.1077, 98.2700],
      [-0.9945, 99.6100],
      [-0.8591, 100.6400],
      [-0.7127, 101.4300],
      [-0.5304, 101.9100],
      [-0.3950, 101.3800],
      [-0.2238, 100.3000],
      [-0.0994, 98.9000],
      [0.0387, 97.1900],
      [0.2017, 94.6300],
      [0.3508, 91.9000],
      [0.4724, 89.3300],
      [0.5829, 86.8400],
      [0.6906, 84.4300],
      [0.8039, 81.8600]
    ]
    let case22Data = [
      [-1.9918, 86.15],
      [-1.783, 89.94],
      [-1.5852, 93.57],
      [-1.4258, 96.12],
      [-1.2582, 98.67],
      [-1.0962, 100.76],
      [-0.9011, 102.78],
      [-0.7033, 104.33],
      [-0.5275, 105.27],
      [-0.3077, 105.67],
      [-0.1593, 105.3],
      [-0.0055, 104.61],
      [0.1401, 103.24],
      [0.2912, 101.48],
      [0.4505, 98.96],
      [0.5604, 96.97],
      [0.6566, 95.13],
      [0.739, 93.36],
      [0.8324, 91.53],
      [0.9341, 89.38]
    ]
    let case23Data = [
      [-1.9995, 96.59],
      [-1.8523, 99.41],
      [-1.6995, 102.24],
      [-1.5411, 105.06],
      [-1.3994, 107.41],
      [-1.2521, 109.61],
      [-1.1158, 111.57],
      [-1.0046, 112.82],
      [-0.8377, 114.24],
      [-0.7012, 114.63],
      [-0.5257, 114.24],
      [-0.3695, 112.82],
      [-0.2243, 110.47],
      [-0.0958, 107.49],
      [0.0272, 104.51],
      [0.1391, 101.37],
      [0.2453, 98.55],
      [0.3795, 95.18],
      [0.5304, 91.57],
      [0.6897, 87.8]
    ]
    let case31Data = [
      [-1.9971, 59.03],
      [-1.8305, 62.11],
      [-1.6667, 64.78],
      [-1.5259, 66.57],
      [-1.3391, 68.92],
      [-1.1839, 70.63],
      [-1.0029, 71.94],
      [-0.8017, 73],
      [-0.6178, 73.5],
      [-0.4454, 73.59],
      [-0.2701, 73.45],
      [-0.1207, 73.05],
      [0.0029, 72.34],
      [0.1638, 71.22],
      [0.296, 69.78],
      [0.4195, 68.1],
      [0.5603, 65.77],
      [0.6695, 63.76],
      [0.7759, 62.08],
      [0.8994, 59.59]
    ]
    let case32Data = [
      [-1.9972, 67.94],
      [-1.8085, 71.28],
      [-1.6423, 74.09],
      [-1.5296, 75.88],
      [-1.4, 77.74],
      [-1.262, 79.46],
      [-1.1014, 81.01],
      [-0.9268, 82.57],
      [-0.7465, 83.58],
      [-0.5859, 84.12],
      [-0.4028, 84.2],
      [-0.231, 84.05],
      [-0.0676, 83.5],
      [0.0817, 82.41],
      [0.2056, 81.25],
      [0.3465, 79.61],
      [0.4817, 77.9],
      [0.6, 75.8],
      [0.7324, 73.54],
      [0.8817, 71.05]
    ]
    let case33Data = [
      [-1.7775, 90.15],
      [-1.6205, 92.85],
      [-1.5001, 95.31],
      [-1.374, 97.69],
      [-1.2478, 99.69],
      [-1.13, 101.46],
      [-0.9982, 103.54],
      [-0.8437, 105.31],
      [-0.6781, 107.31],
      [-0.5351, 109.77],
      [-0.4204, 112.62],
      [-0.2866, 117.46],
      [-0.1285, 116.38],
      [-0.0403, 113.23],
      [0.1348, 111.54],
      [0.2878, 108.46],
      [0.4408, 105.23],
      [0.5937, 102.46],
      [0.7494, 99.62],
      [0.8883, 96.62]

    ]
  </script>

  <!--  case 按钮切换 -->
  <script>
    function caseAction(caseBtn) {
      console.log('case', $(caseBtn).text());
      let btnText = $(caseBtn).text().trim();
      if ('Case 1: Frequency response' === btnText) {
        console.log('case', "Case 1");
        $('.btn-outline-secondary').removeClass('active');
        $('.btn-outline-secondary').eq(0).addClass('active');
        $('#caseTitle').text(cases[0].title);
        $('#caseDesc').text(cases[0].desc);
        $('#sliderCase2Area').hide();
        $('#sliderCase3Area').hide();
        $('#sliderCase1Area').show();


        console.log("Case1",chart.series.length)
        var chart_length = chart.series.length;
        for(var i=0;i<chart_length;i++)
        {
          chart.series[0].remove();
        }
        console.log("Case1",chart.series.length)

        chart.addSeries({
          data: [],
          name: 'Frequency',
          showInLegend: false,
          marker:{symbol:'circle',fillColor:'red'},
        });
        console.log("Case1",chart.series.length)


        chart.yAxis[0].update({
          max: 70,
          min: 20
        });
        chart.xAxis[0].update({
          max: 1,
          min: -2
        });

        $("#sliderCase1").slider('refresh');
        

      } else if ('Case 2: Jet directivity' === btnText) {

        console.log("Case2",chart.series.length)
        var chart_length = chart.series.length;
        for(var i=0;i<chart_length;i++)
        {
          chart.series[0].remove();
        }
        console.log("Case2",chart.series.length)

        chart.addSeries({
          data: [],
          name: '50 deg',
          marker:{symbol:'circle',fillColor:'red'},
        });
        chart.addSeries({
          data: [],
          name: '90 deg',
          marker:{symbol:'circle',fillColor:'#70C1B3'},
        });
        chart.addSeries({
          data: [],
          name: '130 deg',
          marker:{symbol:'circle',fillColor:'#247BA0'}
        });


        console.log("Case2",chart.series.length)
        $('.btn-outline-secondary').removeClass('active');
        $('.btn-outline-secondary').eq(1).addClass('active');
        $('#caseTitle').text(cases[1].title);
        $('#caseDesc').text(cases[1].desc);
        $('#sliderCase1Area').hide();
        $('#sliderCase3Area').hide();
        $('#sliderCase2Area').show();



        chart.yAxis[0].update({
          max: 130,
          min: 80
        });
        chart.xAxis[0].update({
          max: 1,
          min: -2
        });

        $("#sliderCase21").slider('refresh');
        $("#sliderCase22").slider('refresh');
        $("#sliderCase23").slider('refresh');

      } else if ('Case 3: Mach number' === btnText) {

        var chart_length = chart.series.length;
        for(var i=0;i<chart_length;i++)
        {
          chart.series[0].remove();
        }

        chart.addSeries({
          data: [],
          name: 'Mj = 0,5',
          marker:{symbol:'circle',fillColor:'red'},
        });

          chart.addSeries({
            data: [],
            name: 'Mj = 0,7',
            marker:{symbol:'circle',fillColor:'#70C1B3'},
          });
          chart.addSeries({
            data: [],
            name: 'Mj = 1,47',
            marker:{symbol:'circle',fillColor:'#247BA0'}
          });

        $('.btn-outline-secondary').removeClass('active');
        $('.btn-outline-secondary').eq(2).addClass('active');
        $('#caseTitle').text(cases[2].title);
        $('#caseDesc').text(cases[2].desc);
        $('#sliderCase1Area').hide();
        $('#sliderCase2Area').hide();
        $('#sliderCase3Area').show();


        chart.yAxis[0].update({
          max: 120,
          min: 50
        });
        chart.xAxis[0].update({
          max: 1,
          min: -2
        });

        $("#sliderCase31").slider('refresh');
        $("#sliderCase32").slider('refresh');
        $("#sliderCase33").slider('refresh');

      }
    }
  </script>



  <!-- 滚动条事件 -->
  <script>
    let data = [];
    $("#sliderCase1").slider();
    $("#sliderCase21").slider();
    $("#sliderCase22").slider();
    $("#sliderCase23").slider();
    $("#sliderCase31").slider();
    $("#sliderCase32").slider();
    $("#sliderCase33").slider();

    $("#sliderCase1").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data = [];
        chart.series[0].setData(data);
      }

      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case1Data[i]);

        chart.series[0].setData(data);
      }
    });

    $("#sliderCase21").on("slide", function (slideEvt) {
      console.log('sliderCase21', slideEvt.value)
      if (-1 === slideEvt.value) {
        data21 = [];
        chart.series[0].setData(data21);
      }
      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case21Data[i]);

        chart.series[0].setData(data);
      }
    });

    $("#sliderCase22").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data22 = [];
        chart.series[1].setData(data22);
      }
      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case22Data[i]);

        chart.series[1].setData(data);
      }
    });

    $("#sliderCase23").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data23 = [];
        chart.series[2].setData(data23);
      }
      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case23Data[i]);

        chart.series[2].setData(data);
      }
    });


    $("#sliderCase31").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data31 = [];
        chart.series[0].setData(data31);
      }
      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case31Data[i]);

        chart.series[0].setData(data);
      }
    });

    $("#sliderCase32").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data32 = [];
        chart.series[1].setData(data32);
      }
      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case32Data[i]);

        chart.series[1].setData(data);
      }
    });

    $("#sliderCase33").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data33 = [];
        chart.series[2].setData(data33);
      }
      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case33Data[i]);

        chart.series[2].setData(data);
      }
    });
  </script>

  <!-- highcharts -->
  <script>
    Highcharts.setOptions({
      colors: ['#70C1B3', '#247BA0', '#F3FFBD', '#B2DBBF']
    });


    var chart = Highcharts.chart('container', {



		tooltip: {
			formatter: function () {
			return 'St:'+ Math.pow(10,this.x).toFixed(2) + ', SPL(dB):'+this.y;
			}
		},


	 credits: {
        enabled: false
      }, //去掉版权
      chart: {
        type: 'scatter',
        zoomType: 'xy'
      },
      title: {
        text: ' '
      },
      subtitle: {
        text: ' '
      },
      xAxis: {
        title: {
          enabled: true,
          text: 'St(10^x)'
        },
        startOnTick: true,
        endOnTick: true,
        showLastLabel: true,
        max: 1,
        min: -2
      },
      yAxis: {
        title: {
          text: 'SPL (dB)'
        },
        max: 70,
        min: 20
      },
      legend: {
        layout: 'vertical',
        align: 'left',
        verticalAlign: 'top',
        x: 100,
        y: 10,
        floating: true,
        // backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
        borderWidth: 1
      },

      plotOptions: {
        scatter: {
          marker: {
            radius: 5,
            fillColor:'#FF1654',
            states: {
              hover: {
                enabled: true,
                lineColor: 'rgb(100,100,100)'
              }
            }
          },
          states: {
            hover: {
              marker: {
                enabled: false
              }
            }
          },

          //tooltip: {
          //  headerFormat: '<b>{series.name}</b><br>',
          //  pointFormat: 'Frequency:'+ Math.pow(10,this.series) + ', SPL/dB:{point.y}'
         // }
        }
      },
      series: [{
        name: 'Frequency',
        showInLegend: false,
        color: 'rgba(223, 83, 83, .5)',
        data: []
      }]
    });
  </script>

</body>

</html>
