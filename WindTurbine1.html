<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="favicon.ico">
	
  <title>ProfEd NRMS</title>
  <link href="css/bootstrap.css" rel="stylesheet">
  <link href="css/dashboard.css" rel="stylesheet">
  <link href="css/bootstrap-slider.min.css" rel="stylesheet">
</head>

<body>
  <nav class="navbar navbar-dark fixed-top bg-primary flex-md-nowrap p-0 shadow">
    <a class="navbar-brand col-12" href="#">Aeroacoustics: Noise Reduction Strategies for Mechanical Systems</a>
  </nav>
  <div class="container-fluid">
    <div class="row">
      <nav class="col-md-2 d-none d-md-block bg-light sidebar">
        <div class="sidebar-sticky">
          <ul class="nav flex-column">

            <li class="nav-item">
              <a class="nav-link "   href="index.html" target="_self">
                <span data-feather="file"></span>
                Jet noise - Lighthill's analogy
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link active"  href="WindTurbine1.html"  target="_self">
                <span data-feather="file"></span>
                Wind turbine noise - surface pressure fluctuations
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link "  href="WindTurbine2.html"  target="_self">
                <span data-feather="file"></span>
                Wind turbine noise - predicted noise in the far field
              </a>
            </li>

            <li class="nav-item">
              <a class="nav-link"  href="Propeller.html"  target="_self">
                <span data-feather="file"></span>
                Propeller noise - tonal components
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link"  href="WingFlap.html"  target="_self">
                <span data-feather="file"></span>
                Cavity noise - frequency response
              </a>
            </li>

          </ul>
        </div>
      </nav>

      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
          <h1 class="h2">Wind turbine noise - surface pressure fluctuations</h1>
          <div class="btn-toolbar mb-2 mb-md-0">
            <div class="btn-group mr-2">
              <button class="btn btn-sm btn-outline-secondary active" onclick="caseAction(this)">Case 1: Spectral density in frequency </button>
              <button class="btn btn-sm btn-outline-secondary" onclick="caseAction(this)">Case 2: Chordwise distance from TE</button>
              <button class="btn btn-sm btn-outline-secondary" onclick="caseAction(this)">Case 3: Airfoil type</button>
              <button class="btn btn-sm btn-outline-secondary" onclick="caseAction(this)">Case 4: Relative incoming flow speed</button>
            </div>
          </div>
        </div>

        <!-- Text in the menu  -->
        <blockquote class="blockquote text-justify">
          <p><font size="3">The trailing-edge noise-computation for a wind turbine starts from the estimation of the surface pressure-fluctuations at the blade trailing edge. The latter can be 
             used as input in Amiet's trailing-edge noise-model for example. As a first approximation we can consider the blade constituted by several airfoils (i.e. blade sections), 
             each one rotating at a specific speed, and therefore with a specific incoming velocity. In this example here below, we focus on a single airfoil, and we determine the spectral
             distribution of the surface pressure-fluctuations, in function of their frequency content. By clicking the nomenclature button besides the formula, you can find the explanations
             of all input parameters. Top-right of this page, you can choose different cases to play with. All the graphs are obtained according to the formulas from: 
          </p>
          <p><font size="3"; style="color:blue"> Rozenberg Y., Robert G., Moreau S., 2012, Wall-pressure spectral model including the adverse pressure gradient effects, AIAA Journal 50(10). 
          </p>
        </blockquote>

        <!-- Formula image  -->
        <div class="row">
          <div class="col"><img style="width:660px;height:110px" src="img/wind_turbine_1/formula1.png" alt=""></div>
         <div class="col">
            <img style="width:180px;height:70px" src="img/click.png" alt="" data-toggle="modal" data-target="#exampleModal">
          </div>
        </div>

        <!-- Title and conditions  -->
        <div class="row" style="margin-top:30px;">
          <div class="col">
            <h4 id="caseTitle" class="text-primary">Case 1: Spectral density in frequency</h4>
          </div>
        </div>
        <div class="row" style="margin-bottom:30px;">
          <div class="col-12">
            <h6 id="caseDesc"> NACA0012 airfoil: Angle of attack α=0°, Chord c=1m, Wind-speed V∞=70m/s.</h6>
          </div>
        </div>

        <div id="container" style="width:60%; margin:0 auto"></div>

        <!--Slider Frequency  -->
        <div id="sliderCase1Area">
          <div class="row">
            <div class="col-1">Frequency</div>
            <div class="col-11">
              <input id="sliderCase1" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>
        </div>

        <!--Slider TE locations  -->
        <div id="sliderCase2Area" style="display:none">
          <div class="row">
            <div class="col-1">x<sub>TE</sub>=2%c
            </div>
            <div class="col-11">
              <input id="sliderCase21" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>
          <div class="row">
            <div class="col-1"> x<sub>TE</sub>=8%c
            </div>
            <div class="col-11">
              <input id="sliderCase22" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>

        </div>

        <!--Slider Airfoils  -->
        <div id="sliderCase3Area" style="display:none">
          <div class="row">
            <div class="col-1">NACA0012
            </div>
            <div class="col-11">
              <input id="sliderCase31" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="19" data-slider-step="1" data-slider-value="-1" />
                </div>
           </div>
          <div class="row">
            <div class="col-1">NACA5510
            </div>
            <div class="col-11">
              <input id="sliderCase32" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="20" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>
        </div>

        <!--Slider Speeds  -->
        <div id="sliderCase4Area" style="display:none">
          <div class="row">
            <div class="col-1">V<sub>&#8734</sub>=30m/s
            </div>
            <div class="col-11">
              <input id="sliderCase41" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="18" data-slider-step="1" data-slider-value="-1" />
            </div>

          </div>
          <div class="row">
            <div class="col-1">V<sub>&#8734</sub>=50m/s
            </div>
            <div class="col-11">
              <input id="sliderCase42" type="text" style="width:90%;padding-left: 100px;" data-slider-min="-1"
                data-slider-max="18" data-slider-step="1" data-slider-value="-1" />
            </div>
          </div>

        </div>
    </div>

    </main>
  </div>
  </div>


  <!-- Modal -->
  <div class="modal fade" style="top:100px;left:-200px;" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <img style="width:527px;height:761px" src="img/wind_turbine_1/explain.png" alt="">
    </div>
  </div>

  <script src="js/jquery.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>

  <script src="js/bootstrap-slider.js"></script>
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>


  <!-- icons -->
  <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
  <script>
    feather.replace();
  </script>
  <!-- icons end -->

  <script>
    var sidebtn = function (nav) {
      console.log($(nav));
      // let navTitle = $(nav).text().trim();
      // if('Wind Turbine' === navTitle){
      //   $(nav).
      // }
    }
  </script>


  <!-- 初始化数据 -->
  <script>
    let cases = [{title: 'Case 1: Spectral density in frequency',
        	  desc: 'NACA0012 airfoil: Angle of attack α=0°, Chord c=1m, Wind-speed V∞=70m/s.'},
      		 {title: 'Case 2: Chordwise distance from TE',
      	       	  desc: 'NACA0012 airfoil: Angle of attack α=0°, Chord c=1m, Wind-speed V∞=70m/s, two chordwise distances from the edge.'},
		 {title: 'Case 3: Airfoil type',
		   desc: 'NACA0012 and NACA5510 airfoils, Angle of attack α=0°, Chord c=1m, Wind-speed V∞=70m/s.'},
		 {title: 'Case 4: Relative incoming flow speed',
     		  desc: 'NACA0012 airfoil, Angle of attack α=0°, Chord c=1m, Wind-speed V∞=30-50m/s.'}]
    
    let case11Data = [	[300.91, 79.95],		[350.79, 80.63],		[401.49, 81.13],		[502.28, 81.89],		[600.14, 82.34],		[701.84, 82.66],		[795.99, 82.84],		
    [900.03, 82.88],		[996.03, 82.92],		[1238.78, 82.80],		[1521.98, 82.50],		[1994.76, 81.76],		[2451.13, 80.97],		[2993.65, 80.00],		[3491.61, 79.04],		
    [3985.68, 78.15],	  [4974.86, 76.38],		[5893.23, 74.83],		[7379.39, 72.64],		[9471.79, 69.90]    ];

    let case21Data = [	[300.91, 79.95],		[350.79, 80.63],		[401.49, 81.13],		[502.28, 81.89],		[600.14, 82.34],		[701.84, 82.66],		[795.99, 82.84],		
    [900.03, 82.88],		[996.03, 82.92],		[1238.78, 82.80],		[1521.98, 82.50],		[1994.76, 81.76],		[2451.13, 80.99],		[2993.65, 80.00],		[3491.61, 79.04],		
    [3985.68, 78.15],		[4974.86, 76.38],		[5893.23, 74.83],		[7379.39, 72.64],		[9471.79, 69.90]    ];

    let case22Data = [	[300.05, 79.35],		[350.42, 79.92],		[399.16, 80.51],		[496.18, 81.22],		[598.28, 81.75],		[696.81, 82.20],		[798.21, 82.48],
		[899.28, 82.72],		[999.23, 82.80],		[1293.25, 83.09],		[1614.59, 83.13],		[1999.11, 83.09],		[2461.65, 82.87],		[2989.49, 82.58],		[3463.22, 82.36],
		[3989.93, 82.03],		[4982.17, 81.46],		[6067.78, 80.89],		[7514.18, 80.22],		[9947.14, 79.15]    ];
    let case31Data = [
		[300.91, 79.95],		[350.79, 80.63],		[401.49, 81.13],		[502.28, 81.89],		[600.14, 82.34],		[701.84, 82.66],		[795.99, 82.84],		[900.03, 82.88],
		[996.03, 82.92],		[1238.78, 82.80],		[1521.98, 82.50],		[1994.76, 81.76],		[2451.13, 80.99],		[2993.65, 80.00],		[3491.61, 79.04],		[3985.68, 78.15],
		[4974.86, 76.38],		[5893.23, 74.83],		[7379.39, 72.64],		[9471.79, 69.90]    ];
    let case32Data = [	[300.27, 86.24],		[348.78, 87.01],		[423.44, 87.84],		[488.24, 88.44],		[569.92, 89.00],		[662.00, 89.42],		[772.75, 89.77],
		[910.92, 90.01],		[1000.00, 90.10],		[1164.43, 90.09],		[1376.01, 89.88],		[1634.04, 89.52],		[1935.70, 88.95],		[2231.95, 88.20],		[2683.24, 87.06],
		[3147.53, 85.66],		[3629.24, 84.16],		[4267.69, 82.22],		[5018.45, 79.92],		[5944.91, 76.99],		[7007.91, 73.73]    ]
    let case41Data = [	[2000, 38.06],  	[2180, 42.28],  		[2300, 44.35],  		[2480, 46.44],  		[2600, 47.42],  		[2700, 47.96],  		[2780, 47.96],
		[2.85, 47.78],  		[2900, 47.42],  		[2950, 47.04],  		[3000, 46.65],  		[3300, 42.28],  		[3480, 38.06],  		[3600, 34.81],  		[3.70, 32.04],
		[3.78, 29.54],  		[3850, 26.02],  		[3900, 23.52],  		];
    let case42Data = [  [2000, 61.40],   	[2180, 65.69],  		[2300, 68.56],  		[2480, 71.72],  		[2600, 73.22],  		[2700, 73.87],  		[2.78, 74.12],
		[2850, 74.03],  		[2900, 73.78],  		[2950, 73.52],  		[3000, 72.98],  		[3300, 66.53],  		[3480, 60.26],  		[3.60, 53.98],  		[3.70, 48.46],
		[3780, 43.81],  		[3850, 39.08],  		[3900, 34.81],  		[3950, 30.88]    ]
  </script>

  <!--  case 按钮切换 -->
  <script>
    function caseAction(caseBtn) {
      console.log('case', $(caseBtn).text());
      let btnText = $(caseBtn).text().trim();
      if (cases[0].title === btnText) {
        console.log('case', "Case 1");
        $('.btn-outline-secondary').removeClass('active');
        $('.btn-outline-secondary').eq(0).addClass('active');
        $('#caseTitle').text(cases[0].title);
        $('#caseDesc').text(cases[0].desc);
        $('#sliderCase1Area').show();
        $('#sliderCase2Area').hide();
        $('#sliderCase3Area').hide();
        $('#sliderCase4Area').hide();
        //设置hightcharts
        data = [];
        data11=[];data21=[];data22=[];data31=[];data32=[];data41=[];data42=[];
        var chart_length = chart.series.length;
        for(var i=0;i<chart_length;i++)
        {  chart.series[0].remove();  }

        chart.addSeries({
          data: [],
          name: 'Frequency',
          showInLegend: false,
          marker:{symbol:'circle',fillColor:'red'},
        });

        chart.yAxis[0].update({
          max: 83,
          min: 68
        });
        chart.xAxis[0].update({
          max: 10000,
          min: 300
        });

        $("#sliderCase1").slider('refresh');


      } else if (cases[1].title === btnText) {

        console.log('case', "Case 2");
        var chart_length = chart.series.length;
        for(var i=0;i<chart_length;i++)
        {
          chart.series[0].remove();
        }

        chart.addSeries({
          data: [],
          name: '2%c upstream',
          marker:{symbol:'circle',fillColor:'red'},
        });

        chart.addSeries({
          data: [],
          name: '8%c upstream',
          marker:{symbol:'circle',fillColor:'#70C1B3'},
        });


        $('.btn-outline-secondary').removeClass('active');
        $('.btn-outline-secondary').eq(1).addClass('active');
        $('#caseTitle').text(cases[1].title);
        $('#caseDesc').text(cases[1].desc);
        $('#sliderCase1Area').hide();
        $('#sliderCase2Area').show();
        $('#sliderCase3Area').hide();
        $('#sliderCase4Area').hide();
        // $('#sliderCase21').silder({value:0});

        chart.xAxis[0].update({
          max: 10000,
          min: 300
        });
        chart.yAxis[0].update({
          max: 84,
          min: 70
        });

        $("#sliderCase1").slider('refresh');

      } else if (cases[2].title === btnText) {
        var chart_length = chart.series.length;
        for(var i=0;i<chart_length;i++)
        {
          chart.series[0].remove();
        }


        chart.addSeries({
          data: [],
          name: 'NACA0012',
          marker:{symbol:'circle',fillColor:'red'},
        });

        chart.addSeries({
          data: [],
          name: 'NACA5510',
          marker:{symbol:'circle',fillColor:'#70C1B3'},
        });


        $('.btn-outline-secondary').removeClass('active');
        $('.btn-outline-secondary').eq(2).addClass('active');
        $('#caseTitle').text(cases[2].title);
        $('#caseDesc').text(cases[2].desc);
        $('#sliderCase1Area').hide();
        $('#sliderCase2Area').hide();
        $('#sliderCase3Area').show();
        $('#sliderCase4Area').hide();


        chart.xAxis[0].update({
          max: 10000,
          min: 300
        });
        chart.yAxis[0].update({
          max: 91,
          min: 70
        });

        $("#sliderCase21").slider('refresh');
        $("#sliderCase22").slider('refresh');


      }else if (cases[3].title === btnText) {

        var chart_length = chart.series.length;
        for(var i=0;i<chart_length;i++)
        {
          chart.series[0].remove();
        }

        chart.addSeries({
          data: [],
          name: 'V&#8734 30m/s',
          marker:{symbol:'circle',fillColor:'red'},
        });

        chart.addSeries({
          data: [],
          name: 'V&#8734 50m/s',
          marker:{symbol:'circle',fillColor:'#70C1B3'},
        });

        $('.btn-outline-secondary').removeClass('active');
        $('.btn-outline-secondary').eq(3).addClass('active');
        $('#caseTitle').text(cases[3].title);
        $('#caseDesc').text(cases[3].desc);
        $('#sliderCase1Area').hide();
        $('#sliderCase2Area').hide();
        $('#sliderCase3Area').hide();
        $('#sliderCase4Area').show();

        chart.yAxis[0].update({
          max: 80,
          min: 20
        });
        chart.xAxis[0].update({
          max: 4,
          min: 2
        });

        $("#sliderCase31").slider('refresh');
        $("#sliderCase32").slider('refresh');

      }
    }
  </script>

  <!-- 滚动条事件 -->
  <script>
    let data = [], data11 = [], data21 = [], data22 = [],  data31 = [], data32 = [],  data41 = [], data42 = [];
    $("#sliderCase1").slider();
    $("#sliderCase21").slider();
    $("#sliderCase22").slider();
    $("#sliderCase31").slider();
    $("#sliderCase32").slider();
    $("#sliderCase41").slider();
    $("#sliderCase42").slider();

    $("#sliderCase1").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data = [];
        chart.series[0].setData(data);
      }

      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case11Data[i]);

        chart.series[0].setData(data);
      }
    });

    $("#sliderCase21").on("slide", function (slideEvt) {
      console.log('sliderCase21', slideEvt.value)
      if (-1 === slideEvt.value) {
        data = [];
        chart.series[0].setData(data);
      }

      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case21Data[i]);

        chart.series[0].setData(data);
      }
    });

    $("#sliderCase22").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data = [];
        chart.series[1].setData(data);
      }

      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case22Data[i]);

        chart.series[1].setData(data);
      }
    });

    $("#sliderCase31").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data = [];
        chart.series[0].setData(data);
      }

      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case31Data[i]);

        chart.series[0].setData(data);
      }
    });


    $("#sliderCase32").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data = [];
        chart.series[1].setData(data);
      }

      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case32Data[i]);

        chart.series[1].setData(data);
      }
    });

    $("#sliderCase41").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data = [];
        chart.series[0].setData(data);
      }

      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case41Data[i]);

        chart.series[0].setData(data);
      }
    });

    $("#sliderCase42").on("slide", function (slideEvt) {
      if (-1 === slideEvt.value) {
        data = [];
        chart.series[1].setData(data);
      }

      else
      {
        data=[];
        for(var i=0;i<=slideEvt.value;i++)
        data.push(case42Data[i]);

        chart.series[1].setData(data);
      }
    });
  </script>

  <!-- highcharts -->
  <script>
    Highcharts.setOptions({
      colors: ['#70C1B3', '#247BA0', '#F3FFBD', '#B2DBBF']
    });
    var chart = Highcharts.chart('container', {
	  credits: {
        enabled: false
      }, //去掉版权
      chart: {
        type: 'scatter',
        zoomType: 'xy'
      },
      title: {
        text: ' '
      },
      subtitle: {
        text: ' '
      },
      xAxis: {
        title: {
          enabled: true,
          text: 'Frequency (Hz)'
        },
        startOnTick: true,
        endOnTick: true,
        showLastLabel: true,
        max: 10000,
        min: 300
      },
      yAxis: {
        title: {
          text: 'ϕ<sub>pp</sub>(dB/Hz)'
         },
        max: 83,
        min: 68
      },
      legend: {
        layout: 'vertical',
        align: 'left',
        verticalAlign: 'top',
        x: 50,
        y: 1,
        floating: true,
        // backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
        borderWidth: 1
      },
      plotOptions: {
        scatter: {
          marker: {
            radius: 5,
            fillColor:'#FF1654',
            states: {
              hover: {
                enabled: true,
                lineColor: 'rgb(100,100,100)'
              }
            }
          },
          states: {
            hover: {
              marker: {
                enabled: false
              }
            }
          },
          tooltip: {
            headerFormat: '<b>{series.name}</b><br>',
            pointFormat: 'ϕ<sub>pp</sub>:{point.y}, Frequency (Hz):{point.x}'
          }
        }
      },
      series: [{
        name: 'Frequency:',
        showInLegend: false,
        color: 'rgba(223, 83, 83, .5)',
        data: []
      }]
    });
  </script>
</body>

</html>
